(:title Плагин TableOfContents. Создание оглавления для страницы :)
(:description Плагин TableOfContents для программы OutWiker позволяет создавать оглавление по заголовкам на странице :)
(:linebreaks:)
%center%(:ad:)

Attach:Soft/Outwiker/us.png [[English version -> Outwiker/ContentsEn]]

Плагин TableOfContents ищет заголовки на странице и строит по ним оглавление. Если заголовок включает в себя якорь, то пункты оглавления будут представлять собой ссылки на соответствующие якоря.

[[TableOfContents 1.0.4 -> Attach:tableofcontents-1.0.4.zip]] ('''Требуемая версия OutWiker: 1.8 - 2.1.0.834''')

[[TableOfContents {{ version_full }} -> Attach:tableofcontents-{{ version_full }}.zip]] ('''Требуемая версия OutWiker: 2.1.0.836 и выше''')

<!--#version stable {{ version_full }} -->

(:DonateOW:)


!!! [[#using]] Использование

Плагин TableOfContents предоставляет два способа создания оглавления. Первый - это вставить команду [=(:toc:)=] на страницу, где должно быть оглавление. В этом случае при каждом рендеринге страницы оглавление будет пересоздаваться заново.

Если же вас не устраивает оглавление, создаваемое автоматически, то вы можете воспользоваться пунктом меню "Вики - Оглавление - Создать", и на страницу будет вставлено оглавление в виде викинотации, которое можно подправить под ваши нужды.

Рассмотрим несколько примеров.

!!!! Оглавление без ссылок

Пусть у нас есть следующая структура страницы.

(:source lang="text":)
!! Введение
...
!! Глава 1
...
!!! Раздел 1.1
...
!!! Раздел 1.2
...
!! Глава 2
...
!! Заключение
(:sourceend:)

Если мы где-нибудь на этой странице выберем тункт меню "Вики - Оглавление - Создать", то на страницу будет добавлен следующий текст:

(:source lang="text":)
* Введение
* Глава 1
** Раздел 1.1
** Раздел 1.2
* Глава 2
* Заключение
(:sourceend:)

В результате оглавление будет выглядеть следующим образом:

Attach:result_01.png

Аналогичного результата можно добиться, добавив на страницу команду [=(:toc:)=].


!!!! Ссылки в оглавлении

Если в заголовках проставлены якоря, то плагин TableOfContents создаст ссылки на эти якоря в оглавлении. Якоря могут находиться в трех позициях относительно заголовка:

* Непосредственно перед тегами !!...
* Сразу после тегов !!...
* В конце заголовка.

Все три случая показаны в следующем примере:

(:source lang="text":)
!! [[#intro]] Введение
...
!! [[#chapter1]] Глава 1
...
[[#section1_1]]
!!! Раздел 1.1
...
[[#section1_2]]
!!! Раздел 1.2
...
!! [[#chapter1]] Глава 2
...
!! Заключение [[#resume]]
(:sourceend:)

Для такой структуры страницы оглавление будет выглядеть следующим образом:

(:source lang="text":)
* [[Введение -> #intro]]
* [[Глава 1 -> #chapter1]]
** [[Раздел 1.1 -> #section1_1]]
** [[Раздел 1.2 -> #section1_2]]
* [[Глава 2 -> #chapter1]]
* [[Заключение -> #resume]]
(:sourceend:)

Все заголовки будут представлять собой ссылки:

Attach:result_02.png

Точно так же будет выглядеть результат, полученный с помощью команды [=(:toc:)=].


!!! Совместное использование плагинов TableOfContents и Counter

Плагин [[Counter -> http://jenyay.net/Outwiker/Counter]] удобно использовать для нумерации глав и разделов, но для того, чтобы оглавление, созданное с помощью плагина TableOfContents также содержало правильную нумерацию, нужно на страницу добавить одно небольшое шаманство.

Для начала посмотрим, в чем проблема. В качестве примера возьмем главы из "Золотого теленка". Если бы Ильф с Петровым писали свое произведение в OutWiker с использованием плагина Counter, у них была бы примерно структура глав:

(:source lang="text":)
!!! Глава (:counter name="chapter":). О том, как Паниковский нарушил конвенцию
...
!!! Глава (:counter name="chapter":). Тридцать сыновей лейтенанта Шмидта
...
!!! Глава (:counter name="chapter":). Бензин ваш — идеи наши
...
!!! Глава (:counter name="chapter":). Обыкновенный чемоданишко
(:sourceend:)

Результат будет выглядеть следующим образом:

Attach:result_03.png

Все замечательно. Если мы теперь в начале страницы создадим оглавление, то текст страницы будет выглядеть следующим образом:

(:source lang="text":)
* Глава (:counter name="chapter":). О том, как Паниковский нарушил конвенцию
* Глава (:counter name="chapter":). Тридцать сыновей лейтенанта Шмидта
* Глава (:counter name="chapter":). Бензин ваш — идеи наши
* Глава (:counter name="chapter":). Обыкновенный чемоданишко


!!! Глава (:counter name="chapter":). О том, как Паниковский нарушил конвенцию
...
!!! Глава (:counter name="chapter":). Тридцать сыновей лейтенанта Шмидта
...
!!! Глава (:counter name="chapter":). Бензин ваш — идеи наши
...
!!! Глава (:counter name="chapter":). Обыкновенный чемоданишко
(:sourceend:)

Счетчик, как и положено, попал в оглавление, но после оглавления он продолжает наращивать свое значение, в результате чего "настоящие" главы начнут свою нумерацию с 5 в данном случае. Чтобы исправить такое поведение достаточно "сбросить" счетчик после оглавления, добавив всего одну строку:

(:source lang="text":)
* Глава (:counter name="chapter":). О том, как Паниковский нарушил конвенцию
* Глава (:counter name="chapter":). Тридцать сыновей лейтенанта Шмидта
* Глава (:counter name="chapter":). Бензин ваш — идеи наши
* Глава (:counter name="chapter":). Обыкновенный чемоданишко

(:counter name="chapter" start=0 hide:)

!!! Глава (:counter name="chapter":). О том, как Паниковский нарушил конвенцию
...
!!! Глава (:counter name="chapter":). Тридцать сыновей лейтенанта Шмидта
...
!!! Глава (:counter name="chapter":). Бензин ваш — идеи наши
...
!!! Глава (:counter name="chapter":). Обыкновенный чемоданишко
(:sourceend:)

Теперь главы будут нумероваться так же, как и в оглавлении. Можно даже заменить все оглавление одной командой [=(:toc:)=]:

(:source lang="text":)
(:toc:)
(:counter name="chapter" start=0 hide:)

!!! Глава (:counter name="chapter":). О том, как Паниковский нарушил конвенцию
...
!!! Глава (:counter name="chapter":). Тридцать сыновей лейтенанта Шмидта
...
!!! Глава (:counter name="chapter":). Бензин ваш — идеи наши
...
!!! Глава (:counter name="chapter":). Обыкновенный чемоданишко
(:sourceend:)

Результат будет выглядеть следующим образом:

Attach:result_04.png

Если теперь понадобится переставить главы местами или добавить в середину еще одну-две главы, то все главы будут автоматически перенумерованы, и оглавление по-прежнему будет соответствовать новой нумерации.

{% include 'changelog.ru.txt' %}

'''[[http://jenyay.net/forum/post/494/ | Обсудить на форуме]]'''

(:rater:)
%center%(:ad:)
